<app-site-menu></app-site-menu>
<div class="topnav">
    <div class="search-container">
        <form action="">
                <input class="search-bar" type="text" matInput placeholder="Search Products" name="search" [(ngModel)]= "filters.name">
                <button class="search-button" color="primary" (click)="buttonSearchClick()">
                    <mat-icon>search</mat-icon>
                </button>
        </form>
    </div>
</div>

<div class="main-content">
    <div class="filter-section">
        <mat-card>
            <mat-card-content>
                <h2>Filters</h2>
                <section>
                    <mat-checkbox>Min. Price: </mat-checkbox>
                    <input [(ngModel)] = "filters.minPrice" matInput type="number"><br>
                    <mat-checkbox>Max. Price: </mat-checkbox>
                    <input [(ngModel)] = "filters.maxPrice" matInput type="number"><br>
                    <mat-checkbox>Min. Seller Rating: </mat-checkbox>
                    <input [(ngModel)] = "filters.minSellerRating" matInput type="number"><br>
                    <mat-checkbox>Max. Seller Rating: </mat-checkbox>
                    <input [(ngModel)] = "filters.maxSellerRating" matInput type="number">
                    <div class="form-group">
                        <label for="types">Types:</label>
                        <div *ngFor="let type of types; let i = index">
                            <label>
                                <input type="checkbox"
                                       name="types"
                                       value="{{type.value}}"
                                       [(ngModel)]="type.checked"/>
                                {{type.name}}
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="brands">Brands:</label>
                        <div *ngFor="let brand of brands; let i = index">
                            <label>
                                <input type="checkbox"
                                       name="brands"
                                       value="{{brand.value}}"
                                       [(ngModel)]="brand.checked"/>
                                {{brand.name}}
                            </label>
                        </div>
                    </div>
                </section>
                <button mat-raised-button (click)="applyFilters()">Apply filters</button>
            </mat-card-content>
        </mat-card>
    </div>
    
    <div class="product-listings-container">
        <!-- progress spinner if the user hits search -->
        <mat-card class="progress-spinner" *ngIf="loading === true">
            <mat-card-content>
                <mat-progress-spinner
                    class="spinner"
                    [color]="color"
                    [mode]="mode">
                </mat-progress-spinner>
            </mat-card-content>
        </mat-card>

        <!-- basically a for loop for each element in the array 'products' -->
        <app-product-listing *ngFor="let product of products; let i = index" [object]="product"></app-product-listing>
    </div>
</div>