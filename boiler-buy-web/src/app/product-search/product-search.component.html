<app-site-menu></app-site-menu>
<mat-drawer-container autosize>

    <mat-drawer #drawer mode="side">
        <div class="filter-section" >
            <mat-card>
                <mat-card-content #stickyMenu>
                    <h2>Filters</h2>
                    <section>
                        <mat-checkbox>Min. Price: </mat-checkbox>
                        <input [(ngModel)] = "filters.minPrice" matInput type="number" style="float: right;"><br>
                        <mat-checkbox>Max. Price: </mat-checkbox>
                        <input [(ngModel)] = "filters.maxPrice" matInput type="number" style="float: right;"><br>
                        <mat-checkbox>Min. Seller Rating: </mat-checkbox>
                        <input [(ngModel)] = "filters.minSellerRating" matInput type="number" style="float: right;"><br>
                        <mat-checkbox>Max. Seller Rating: </mat-checkbox>
                        <input [(ngModel)] = "filters.maxSellerRating" matInput type="number" style="float: right;">
                        <div class="form-group">
                            <label for="types">Types:</label>
                            <div *ngFor="let type of types; let i = index">
                                <label>
                                    <input type="checkbox"
                                           name="types"
                                           value="{{type.value}}"
                                           [(ngModel)]="type.checked"/>
                                    {{type.name}}
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="brands">Brands:</label>
                            <div *ngFor="let brand of brands; let i = index">
                                <label>
                                    <input type="checkbox"
                                           name="brands"
                                           value="{{brand.value}}"
                                           [(ngModel)]="brand.checked"/>
                                    {{brand.name}}
                                </label>
                            </div>
                        </div>
                    </section>
                    <button mat-raised-button (click)="applyFilters()">Apply filters</button>
                </mat-card-content>
            </mat-card>
        </div>
    </mat-drawer>

    <br>

    <div class="search-bar-container" #stickyMenu [class.sticky]="sticky">

        <button class="icon" mat-icon-button color="primary" (click)="drawer.toggle()">
            <mat-icon>filter_list</mat-icon>
        </button>

        <input class="search-bar" matInput (keyup.enter)="buttonSearchClick()" placeholder="Search Products" name="search" [(ngModel)]= "filters.name">

        <button class="icon" mat-icon-button color="primary" (click)="buttonSearchClick()" style="position: fixed; right: 0;">
            <mat-icon>search</mat-icon>
        </button>
    </div>

    <br>
    

    <div class="main-content">
        <div class="product-listings-container">
            <!-- progress spinner if the user hits search -->
            <mat-card class="progress-spinner" *ngIf="loading === true">
                <mat-card-content>
                    <mat-progress-spinner
                        class="spinner"
                        [color]="color"
                        [mode]="mode">
                    </mat-progress-spinner>
                </mat-card-content>
            </mat-card>

            <!-- basically a for loop for each element in the array 'products' -->
            <app-groupad-listing *ngFor="let ad of groupAds; let i = index" [object]="ad"></app-groupad-listing>
            <app-product-listing *ngFor="let product of products; let i = index" [object]="product"></app-product-listing>
        </div>
    </div>

</mat-drawer-container>